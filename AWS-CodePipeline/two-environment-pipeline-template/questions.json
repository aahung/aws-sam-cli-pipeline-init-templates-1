{
  "questions": [{
    "key": "git_provider_type",
    "question": "What is the Git provider?",
    "options": ["Bitbucket", "CodeCommit", "GitHub", "GitHubEnterpriseServer"],
    "nextQuestion": {
      "CodeCommit": "codecommit_repository_name"
    },
    "defaultNextQuestion": "codestar_full_repository_id"
  }, {
    "key": "codestar_full_repository_id",
    "question": "What is the full repository id (Example: some-user/my-repo)?",
    "isRequired": true,
    "defaultNextQuestion": "main_git_branch"
  }, {
    "key": "codecommit_repository_name",
    "question": "What is the CodeCommit repository name?",
    "isRequired": true
  }, {
    "key": "main_git_branch",
    "question": "What is the git branch used for production deployments?",
    "default": "main"
  }, {
    "key": "sam_template",
    "question": "What is the template file path?",
    "default": "template.yaml"
  }, {
    "key": "message_testing_environment_name",
    "question": "We use the environment name to automatically retrieve the bootstrapped resources created when you ran `sam pipeline bootstrap`",
    "kind": "info"
  }, {
    "key": "testing_environment_name",
    "question": "What is the testing environment name (as provided during the bootstrapping)?",
    "isRequired": true
  }, {
    "key": "testing_stack_name",
    "question": "What is the testing stack name?",
    "isRequired": true
  }, {
    "key": "testing_pipeline_execution_role",
    "question": "What is the testing pipeline execution role ARN?",
    "isRequired": true,
    "default": {
      "keyPath": [
          { "valueOf": "testing_environment_name"},
          "pipeline_execution_role"
      ]
    }
  }, {
    "key": "testing_cloudformation_execution_role",
    "question": "What is the testing CloudFormation execution role ARN?",
    "isRequired": true,
    "default": {
      "keyPath": [
          { "valueOf": "testing_environment_name"},
          "cloudformation_execution_role"
      ]
    }
  }, {
    "key": "testing_artifacts_bucket",
    "question": "What is the testing S3 bucket name for artifacts?",
    "isRequired": true,
    "default": {
      "keyPath": [
          { "valueOf": "testing_environment_name"},
          "artifacts_bucket"
      ]
    }
  }, {
    "key": "testing_image_repository",
    "question": "What is the testing ECR repository URI?",
    "default": {
      "keyPath": [
          { "valueOf": "testing_environment_name"},
          "image_repository"
      ]
    }
  }, {
    "key": "testing_region",
    "question": "What is the testing AWS region?",
    "isRequired": true,
    "default": {
      "keyPath": [
          { "valueOf": "testing_environment_name"},
          "region"
      ]
    }
  }, {
    "key": "prod_environment_name",
    "question": "What is the production environment name (as provided during the bootstrapping)?",
    "isRequired": true
  }, {
    "key": "prod_stack_name",
    "question": "What is the production stack name?",
    "isRequired": true
  }, {
    "key": "prod_pipeline_execution_role",
    "question": "What is the production pipeline execution role ARN?",
    "isRequired": true,
    "default": {
      "keyPath": [
          { "valueOf": "prod_environment_name"},
          "pipeline_execution_role"
      ]
    }
  }, {
    "key": "prod_cloudformation_execution_role",
    "question": "What is the production CloudFormation execution role ARN?",
    "isRequired": true,
    "default": {
      "keyPath": [
          { "valueOf": "prod_environment_name"},
          "cloudformation_execution_role"
      ]
    }
  }, {
    "key": "prod_artifacts_bucket",
    "question": "What is the production S3 bucket name for artifacts?",
    "isRequired": true,
    "default": {
      "keyPath": [
          { "valueOf": "prod_environment_name"},
          "artifacts_bucket"
      ]
    }
  }, {
    "key": "prod_image_repository",
    "question": "What is the production ECR repository URI?",
    "default": {
      "keyPath": [
          { "valueOf": "prod_environment_name"},
          "image_repository"
      ]
    }
  }, {
    "key": "prod_region",
    "question": "What is the production AWS region?",
    "isRequired": true,
    "default": {
      "keyPath": [
          { "valueOf": "prod_environment_name"},
          "region"
      ]
    }
  }, {
    "key": "instructions",
    "question": "To deploy this template and connect to the main git branch, run\n`sam deploy -t codepipeline.yaml --stack-name <stack-name> --capabilities=CAPABILITY_IAM`\n(replace \"<stack-name>\" with the name of the AWS CloudFormation stack that you're deploying to).\n    \nAfter creating the stack, the CodeStar Connection is in PENDING status by default. You must complete \nthe OAuth handshake with the third-party provider using the installation associated with your connection.\nSee https://docs.aws.amazon.com/dtconsole/latest/userguide/connections-update.html for instructions.\n    \nIf later you need to deploy a new CodePipeline to connect to a non-main git branch, run\n```\nsam deploy -t codepipeline.yaml --stack-name <stack-name> --capabilities=CAPABILITY_IAM \\n--parameter-overrides=\"FeatureGitBranch=<branch-name> CodeStarConnectionArn=<codestar-connection-arn>\n```\n(replace \"<stack-name>\" with the name of the AWS CloudFormation stack that you're deploying to,\n\"<branch-name>\" with the branch name and \"<codestar-connection-arn>\" with the CodeStar Connection ARN which\ncan be found in the first pipeline stack's output.)",
    "kind": "info"
  }]
}
